 <!DOCTYPE html>
<html>
	<head>
    <link rel="stylesheet" type="text/css" href="chapter4.css">
		<script>
      function displayResult(witness) {

    var target = document.getElementById("chapter4")

    xmlFile = fetch("chapter4.xml")
      .then(res => res.text())
      .then(str => (new window.DOMParser()).parseFromString(str, "text/xml"))

    xslFile = fetch("chapter4.xsl")
      .then(res => res.text())
      .then(str => (new window.DOMParser()).parseFromString(str, "text/xml"))

    Promise.all([xmlFile, xslFile])
      .then(files => {

        xml = files[0]
        xsl = files[1]

        // code for normal browsers
        var xsltProcessor = new XSLTProcessor()
        xsltProcessor.importStylesheet(xsl)
        xsltProcessor.setParameter(null, "witness", witness)
        var resultDocument = xsltProcessor.transformToFragment(xml, target.ownerDocument)

        while (target.firstChild) {
          target.removeChild(target.firstChild);
        }
        //console.log(resultDocument)
        target.appendChild(resultDocument)

      })
      .catch(err => {
        console.log(err)
        target.innerHTML = "<p>Cannot retrieve requested file</p>"
      })
  }
		</script>
    <meta charset="utf-8">
	   </head>
	<body onload="displayResult('V')">
		<div id="chapter4" />
	</body>
</html>
